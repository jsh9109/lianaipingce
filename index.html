<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹çˆ±å æœ‰æ¬²æµ‹è¯„ - å‘ç°ä½ çš„æ‹çˆ±æ¨¡å¼</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4e18d107a778198f9a7ddebfaa1b02b7"; /* æ‚¨çš„ç™¾åº¦ç»Ÿè®¡ID */
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #fff0f6 0%, #ffe0f0 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(255, 107, 157, 0.15);
            margin-bottom: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .header h1 {
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .header p {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
        }
        
        /* 4å®«æ ¼å¸ƒå±€ */
        .dimensions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .dimension-card {
            background: linear-gradient(135deg, #fff5f8 0%, #ffe8f0 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s;
            border: 2px solid transparent;
        }
        
        .dimension-card:hover {
            transform: translateY(-5px);
            border-color: #ff6b9d;
        }
        
        .dimension-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .dimension-name {
            color: #ff6b9d;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 5px;
        }
        
        .dimension-desc {
            color: #666;
            font-size: 0.9em;
        }
        
        .features-list {
            background: linear-gradient(135deg, #fff8fa 0%, #fff0f6 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }
        
        .features-list h3 {
            color: #ff6b9d;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .features-list ul {
            list-style: none;
        }
        
        .features-list li {
            padding: 10px 0;
            color: #666;
            font-size: 1em;
            border-bottom: 1px solid #ffe0f0;
        }
        
        .features-list li:before {
            content: "âœ“ ";
            color: #ff6b9d;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .input-group {
            margin: 30px 0;
        }
        
        .input-group input {
            width: 100%;
            padding: 18px;
            border: 2px solid #ffe0f0;
            border-radius: 12px;
            font-size: 1.1em;
            text-align: center;
            transition: all 0.3s;
            letter-spacing: 2px;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #ff6b9d;
            box-shadow: 0 0 0 4px rgba(255, 107, 157, 0.1);
        }
        
        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(255, 107, 157, 0.4);
        }
        
        .btn-secondary {
            background: white;
            color: #ff6b9d;
            border: 2px solid #ff6b9d;
        }
        
        .btn-secondary:hover {
            background: #fff5f8;
        }
        
        .error-message {
            background: #ffe0e0;
            color: #d32f2f;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            text-align: center;
            display: none;
        }
        
        .admin-link {
            text-align: center;
            margin-top: 30px;
            color: #999;
            font-size: 0.9em;
            cursor: pointer;
        }
        
        .admin-link:hover {
            color: #ff6b9d;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ffe0f0;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            transition: width 0.3s;
            border-radius: 10px;
        }
        
        .progress-text {
            text-align: center;
            color: #ff6b9d;
            font-weight: bold;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .question-card {
            background: linear-gradient(135deg, #fff8fa 0%, #fff0f6 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .question-text {
            color: #333;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .option {
            padding: 18px;
            background: white;
            border: 2px solid #ffe0f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.05em;
            color: #666;
        }
        
        .option:hover {
            border-color: #ff6b9d;
            background: #fff5f8;
            transform: translateX(5px);
        }
        
        .option.selected {
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            color: white;
            border-color: #ff6b9d;
        }
        
        .navigation-buttons {
            display: flex;
            gap: 15px;
        }
        
        .navigation-buttons .btn {
            margin-top: 0;
        }
        
        .result-banner {
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .result-banner h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }
        
        .rpi-score {
            font-size: 4em;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .rpi-level {
            display: inline-block;
            background: rgba(255, 255, 255, 0.3);
            padding: 10px 30px;
            border-radius: 25px;
            font-size: 1.2em;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin: 40px 0;
        }
        
        .scores-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .score-item {
            background: linear-gradient(135deg, #fff8fa 0%, #fff0f6 100%);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #ff6b9d;
        }
        
        .score-item-name {
            color: #ff6b9d;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .score-item-value {
            font-size: 1.8em;
            color: #333;
            font-weight: bold;
        }
        
        .score-item-desc {
            color: #999;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        .type-card {
            background: linear-gradient(135deg, #fff5f8 0%, #ffe8f0 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border: 2px solid #ff6b9d;
        }
        
        .type-card h3 {
            color: #ff6b9d;
            font-size: 1.8em;
            margin-bottom: 15px;
        }
        
        .type-card p {
            color: #666;
            line-height: 1.8;
            font-size: 1.05em;
        }
        
        .characteristics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 25px 0;
        }
        
        .characteristic-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .characteristic-title {
            color: #ff6b9d;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .characteristic-list {
            font-size: 0.9em;
            color: #666;
            line-height: 1.6;
        }
        
        .basic-advice {
            background: linear-gradient(135deg, #fff8fa 0%, #fff0f6 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }
        
        .basic-advice h4 {
            color: #ff6b9d;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .basic-advice ul {
            list-style: none;
        }
        
        .basic-advice li {
            padding: 10px 0;
            color: #666;
            border-bottom: 1px solid #ffe0f0;
        }
        
        .basic-advice li:before {
            content: "âš ï¸ ";
            margin-right: 10px;
        }
        
        .unlock-section {
            background: linear-gradient(135deg, #fff9e6 0%, #ffecb3 100%);
            padding: 40px;
            border-radius: 20px;
            margin: 40px 0;
            border: 3px solid #ffd700;
        }
        
        .unlock-section h3 {
            color: #d81b60;
            font-size: 2em;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .comparison-table {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }
        
        .comparison-row {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #ffe0f0;
        }
        
        .comparison-row:last-child {
            border-bottom: none;
        }
        
        .comparison-free {
            color: #999;
        }
        
        .comparison-paid {
            color: #ff6b9d;
            font-weight: bold;
        }
        
        .price-tag {
            text-align: center;
            margin: 30px 0;
        }
        
        .original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 1.2em;
        }
        
        .current-price {
            color: #d81b60;
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .price-note {
            color: #666;
            font-size: 0.9em;
        }
        
        /* --- [V3.1] æ”¯ä»˜æ¨¡å— CSS (ç²‰è‰²ä¸»é¢˜) --- */
        .payment-section {
            width: 100%;
            max-width: 450px;
            margin: 20px auto 0 auto;
            background: white;
            padding: 25px;
            border-radius: 15px;
        }

        .quick-pay-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .payment-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            color: white;
            transition: transform 0.2s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .payment-btn .icon {
            margin-right: 8px;
            font-size: 18px;
        }
        .payment-btn:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }
        .payment-btn.alipay {
            background: #00A3EE; /* æ”¯ä»˜å®è“ */
        }
        .payment-btn.wechat {
            background: #07C160; /* å¾®ä¿¡ç»¿ */
        }

        .divider-or {
            text-align: center;
            color: #aaa;
            margin: 25px 0;
            position: relative;
        }
        .divider-or span {
            background: white; /* æ”¯ä»˜æ¨¡å—çš„ç™½è‰²èƒŒæ™¯ */
            padding: 0 10px;
            position: relative;
            z-index: 1;
        }
        .divider-or:before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 1px;
            background: #e0e0e0;
            z-index: 0;
        }

        .scan-title, .transfer-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }

        .qr-code-grid {
            display: flex;
            flex-direction: column; /* å‚ç›´å¸ƒå±€ */
            align-items: center; /* å±…ä¸­ */
            gap: 25px; /* å‚ç›´é—´è· */
            text-align: center;
        }
        .qr-code-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .qr-code-item img {
            width: 140px;
            height: 140px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .btn-save {
            display: inline-block;
            margin-top: 15px;
            padding: 8px 16px;
            background: #f0f0f0;
            color: #555;
            border-radius: 6px;
            font-size: 13px;
            text-decoration: none;
            font-weight: 500;
            transition: background 0.2s;
        }
        .btn-save:hover {
            background: #e0e0e0;
        }

        .scan-tip {
            text-align: center;
            font-size: 13px;
            color: #888;
            background: #fafafa;
            padding: 10px;
            border-radius: 6px;
            margin-top: 20px;
        }

        .transfer-payment {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .copy-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            padding: 12px 15px;
            border-radius: 8px;
        }
        .copy-item span {
            font-size: 15px;
            color: #333;
            font-weight: 500;
            word-break: break-all;
        }
        .copy-item button {
            padding: 8px 14px;
            border: none;
            background: #ff6b9d; /* ä¸»é¢˜ç²‰è‰² */
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            margin-left: 10px;
            flex-shrink: 0;
        }
        .copy-item button:hover {
            background: #c06c84; /* ä¸»é¢˜æ·±ç²‰è‰² */
        }
        /* --- [V3.1] CSS ç»“æŸ --- */
        
        .report-section {
            background: white;
            padding: 35px;
            border-radius: 15px;
            margin: 30px 0;
            border-left: 5px solid #ff6b9d;
        }
        
        .report-section h3 {
            color: #ff6b9d;
            font-size: 1.8em;
            margin-bottom: 20px;
        }
        
        .report-section h4 {
            color: #c06c84;
            font-size: 1.3em;
            margin: 25px 0 15px 0;
        }
        
        .report-section p {
            color: #666;
            line-height: 1.8;
            font-size: 1.05em;
            margin-bottom: 15px;
        }
        
        .personality-types {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }
        
        .personality-type {
            background: linear-gradient(135deg, #fff8fa 0%, #fff0f6 100%);
            padding: 20px;
            border-radius: 12px;
        }
        
        /* åŠ¨æ€é«˜äº®æ ·å¼ */
        .personality-type.current {
            border: 3px solid #ff6b9d;
            background: linear-gradient(135deg, #ffe8f0 0%, #ffd0e0 100%);
        }
        
        .type-number {
            color: #ff6b9d;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .type-name {
            color: #333;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
        }
        
        .type-score {
            color: #999;
            font-size: 0.9em;
        }
        
        .action-plan {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }
        
        .action-plan h4 {
            color: #2e7d32;
            margin-bottom: 15px;
        }
        
        .action-plan ul {
            list-style: none;
        }
        
        .action-plan li {
            padding: 12px 0;
            color: #555;
            border-bottom: 1px solid #a5d6a7;
        }
        
        .action-plan li:before {
            content: "âœ“ ";
            color: #2e7d32;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }
        
        .resource-card {
            background: linear-gradient(135deg, #fff8fa 0%, #fff0f6 100%);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        .resource-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .resource-title {
            color: #ff6b9d;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .resource-list {
            font-size: 0.9em;
            color: #666;
            line-height: 1.6;
        }
        
        .dos-donts {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 25px 0;
        }
        
        .dos-card {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            padding: 25px;
            border-radius: 15px;
        }
        
        .donts-card {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            padding: 25px;
            border-radius: 15px;
        }
        
        .dos-card h4 {
            color: #2e7d32;
            margin-bottom: 15px;
        }
        
        .donts-card h4 {
            color: #c62828;
            margin-bottom: 15px;
        }
        
        .thank-banner {
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
        }
        
        .thank-banner h3 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }
        
        .admin-panel {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }
        
        .admin-panel h2 {
            color: #ff6b9d;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #fff8fa 0%, #fff0f6 100%);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5em;
            color: #ff6b9d;
            font-weight: bold;
        }
        
        .stat-label {
            color: #666;
            margin-top: 10px;
            font-size: 0.9em;
        }
        
        .recent-records {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .record-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            font-size: 0.9em;
            color: #666;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .card {
                padding: 25px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .header p {
                font-size: 1em;
            }
            
            /* [V3.0 ä¿®å¤] åˆ é™¤å•åˆ—å¼ºåˆ¶è®¾ç½®ï¼Œä¿æŒ2åˆ— */
            
            .chart-container {
                height: 320px;
            }
            
            .scores-list {
                grid-template-columns: 1fr;
            }
            
            .characteristics {
                grid-template-columns: 1fr;
            }
            
            .personality-types {
                grid-template-columns: 1fr;
            }
            
            .resource-grid {
                grid-template-columns: 1fr;
            }
            
            .dos-donts {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .navigation-buttons {
                flex-direction: column;
            }
            
            .rpi-score {
                font-size: 3em;
            }
        }
        
        @media (max-width: 600px) {
            .card {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
            
            .question-text {
                font-size: 1.1em;
            }
            
            .option {
                padding: 15px;
                font-size: 1em;
            }
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="cardVerifyPage" class="card">
            <div class="header">
                <h1>ğŸ’– æ‹çˆ±å æœ‰æ¬²æµ‹è¯„</h1>
                <p>å‘ç°ä½ çš„æ‹çˆ±æ¨¡å¼ Â· ç†è§£ä½ çš„æƒ…æ„Ÿéœ€æ±‚</p>
                <span class="badge">ğŸ”¬ åŸºäºå¿ƒç†å­¦ç ”ç©¶çš„ä¸“ä¸šæµ‹è¯„å·¥å…·</span>
            </div>
            
            <div class="input-group">
                <input type="text" id="cardInput" placeholder="è¯·è¾“å…¥æµ‹è¯„å¡å·" maxlength="20">
            </div>
            
            <button class="btn btn-primary" onclick="verifyCard()">ğŸ’– å¼€å§‹æµ‹è¯„</button>
            
            <div class="dimensions-grid" style="margin-top: 40px;">
                <div class="dimension-card">
                    <div class="dimension-icon">ğŸ“Š</div>
                    <div class="dimension-name">æ§åˆ¶æ¬²æœ›</div>
                    <div class="dimension-desc">å¯¹å…³ç³»çš„æ§åˆ¶å€¾å‘</div>
                </div>
                <div class="dimension-card">
                    <div class="dimension-icon">ğŸ’•</div>
                    <div class="dimension-name">å«‰å¦’å¼ºåº¦</div>
                    <div class="dimension-desc">æƒ…æ„Ÿå æœ‰çš„ç¨‹åº¦</div>
                </div>
                <div class="dimension-card">
                    <div class="dimension-icon">ğŸ’—</div>
                    <div class="dimension-name">æƒ…æ„Ÿä¾èµ–</div>
                    <div class="dimension-desc">å¯¹ä¼´ä¾£çš„ä¾èµ–æ°´å¹³</div>
                </div>
                <div class="dimension-card">
                    <div class="dimension-icon">ğŸ”’</div>
                    <div class="dimension-name">å…³ç³»ä¸å®‰</div>
                    <div class="dimension-desc">å…³ç³»ä¸­çš„å®‰å…¨æ„Ÿ</div>
                </div>
            </div>
            
            <div class="features-list">
                <h3>ğŸ“‹ æµ‹è¯„åŒ…å«</h3>
                <ul>
                    <li>40é¢˜ä¸“ä¸šå¿ƒç†é‡è¡¨ </li>
                    <li>4å¤§ç»´åº¦å æœ‰æ¬²åˆ†æ </li>
                    <li>RPIæŒ‡æ•° + ç™¾åˆ†ä½æ’å </li>
                    <li><strong style="color:#d81b60;">åƒå­—æ·±åº¦æŠ¥å‘Š+è¡ŒåŠ¨æ–¹æ¡ˆ (Â¥4.9è§£é”)</strong></li>
                </ul>
            </div>
            
            <div class="error-message" id="errorMessage"></div>
            
            <div class="admin-link" onclick="showAdminPanel()">ç®¡ç†å‘˜å…¥å£ â†’</div>
        </div>
        
        <div id="testPage" class="card hidden">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">ç¬¬1é¢˜ / å…±40é¢˜</div>
            
            <div class="question-card">
                <div class="question-text" id="questionText"></div>
                <div class="options" id="optionsContainer"></div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="prevBtn" onclick="prevQuestion()" style="display: none;">â† ä¸Šä¸€é¢˜</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">ä¸‹ä¸€é¢˜ â†’</button>
            </div>
        </div>
        
        <div id="freeResultPage" class="card hidden">
            <div class="result-banner">
                <h2>ğŸ’– æ‹çˆ±å æœ‰æ¬²æµ‹è¯„æŠ¥å‘Š</h2>
                <div class="rpi-score" id="rpiScore">99</div>
                <div class="rpi-level" id="rpiLevel">æé«˜ï¼ˆçˆ±åˆ°æè‡´ï¼‰</div>
                <p style="margin-top: 20px;">ä½ çš„å æœ‰æ¬²è¶…è¿‡äº† <span id="percentile">98</span>% çš„äºº</p>
            </div>
            
            <div class="chart-container">
                <canvas id="radarChart"></canvas>
            </div>
            
            <div class="scores-list" id="scoresList"></div>
            
            <div class="type-card">
                <h3 id="typeName">å…±ä¾å­˜èåˆå‹</h3>
                <p id="typeDesc">ä¸ä¼´ä¾£è¿‡åº¦èåˆï¼Œç•Œé™æ¨¡ç³Šï¼Œå¤±å»è‡ªæˆ‘ã€‚ä½ éœ€è¦é€šè¿‡æ§åˆ¶å¯¹æ–¹æ¥è·å¾—å®‰å…¨æ„Ÿï¼Œè¿™å¯èƒ½æºäºæ·±å±‚çš„è¢«æŠ›å¼ƒææƒ§ã€‚</p>
            </div>
            
            <div class="characteristics">
                <div class="characteristic-item">
                    <div class="characteristic-title">ğŸ˜Š Taçš„ä¼˜åŠ¿</div>
                    <div class="characteristic-list">
                        â€¢ å…³ç³»ä¸“æ³¨<br>
                        â€¢ æƒ…æ„Ÿæ·±åˆ»<br>
                        â€¢ æ„¿æ„ä»˜å‡º
                    </div>
                </div>
                <div class="characteristic-item">
                    <div class="characteristic-title">âš ï¸ éœ€è¦æ³¨æ„</div>
                    <div class="characteristic-list">
                        â€¢ å…±ä¾å­˜å…³ç³»<br>
                        â€¢ å¤±å»è‡ªæˆ‘<br>
                        â€¢ è¿‡åº¦æ§åˆ¶
                    </div>
                </div>
                <div class="characteristic-item">
                    <div class="characteristic-title">ğŸ’¡ ä¸“ä¸šå»ºè®®</div>
                    <div class="characteristic-list">
                        â€¢ å»ºç«‹è¾¹ç•Œ<br>
                        â€¢ åŸ¹å…»ç‹¬ç«‹<br>
                        â€¢ å¯»æ±‚å¸®åŠ©
                    </div>
                </div>
            </div>
            
            <div class="basic-advice">
                <h4>âš ï¸ åŸºç¡€å»ºè®®ï¼ˆåŸºç¡€ç‰ˆï¼‰</h4>
                <ul>
                    <li>æ„è¯†åˆ°è¿‡åº¦å æœ‰æ¬²å¯èƒ½ä¼šç»™å…³ç³»å¸¦æ¥å‹åŠ›</li>
                    <li>å°è¯•ç»™è‡ªå·±å’Œä¼´ä¾£ç•™å‡ºç‹¬ç«‹ç©ºé—´</li>
                    <li>è€ƒè™‘é€šè¿‡ä¸“ä¸šå¸®åŠ©æ¢ç´¢å æœ‰æ¬²èƒŒåçš„æ·±å±‚åŸå› </li>
                </ul>
            </div>
            
            <div class="unlock-section">
                <h3 style="font-size: 1.8em; line-height: 1.6; text-align: center; margin-bottom: 25px;">
                    æ‚¨çš„åŸºç¡€ç‰ˆæŠ¥å‘Šå·²å‡º ğŸ‘‡<br>
                    å¦‚éœ€ <strong style="color: #d81b60;">åƒå­—æ·±åº¦å¿ƒç†åˆ†æ</strong> å’Œ <strong style="color: #d81b60;">30å¤©è¡ŒåŠ¨è®¡åˆ’</strong>ï¼Œå¯ä»˜è´¹è§£é”ï¼š
                </h3>
                
                <div class="comparison-table">
                    <div class="comparison-row">
                        <span class="comparison-free">åŸºç¡€å¾—åˆ†</span>
                        <span>â†’</span>
                        <span class="comparison-paid">åƒå­—æ·±åº¦å¿ƒç†åˆ†æ</span>
                    </div>
                    <div class="comparison-row">
                        <span class="comparison-free">ç±»å‹æ ‡ç­¾</span>
                        <span>â†’</span>
                        <span class="comparison-paid">12ç§å æœ‰æ¬²äººæ ¼ç”»åƒ</span>
                    </div>
                    <div class="comparison-row">
                        <span class="comparison-free">ç®€å•å»ºè®®</span>
                        <span>â†’</span>
                        <span class="comparison-paid">30å¤©æƒ…æ„Ÿè¾¹ç•Œå»ºç«‹è®¡åˆ’</span>
                    </div>
                    <div class="comparison-row">
                        <span class="comparison-free">æ— èµ„æºæ¨è</span>
                        <span>â†’</span>
                        <span class="comparison-paid">5æœ¬ä¹¦+3ä¸ªè¯¾ç¨‹+ç¤¾ç¾¤æ¨è</span>
                    </div>
                    <div class="comparison-row">
                        <span class="comparison-free">æ— å…·ä½“æ–¹æ³•</span>
                        <span>â†’</span>
                        <span class="comparison-paid">5ç§æ²Ÿé€šè¯æœ¯+é¿å‘æŒ‡å—</span>
                    </div>
                </div>
                
                <div class="price-tag">
                    <div class="original-price">åŸä»· Â¥29.9</div>
                    <div class="current-price">Â¥4.9</div>
                    <div class="price-note">é™æ—¶ç‰¹æƒ  Â· ä¸€é¡¿æ—©é¤çš„ä»·æ ¼æ¢æ¥å…³ç³»çš„å’Œè°</div>
                </div>
                
                <p style="text-align: center; color: #666; margin: 25px 0; line-height: 1.8;">
                    ğŸ’ è¿™ä¸ä»…æ˜¯ä¸€ä»½æµ‹è¯„æŠ¥å‘Šï¼Œæ›´æ˜¯ï¼š<br>
                    âœ“ ä¸€æ¬¡æ·±åº¦çš„è‡ªæˆ‘è®¤çŸ¥<br>
                    âœ“ ä¸€å¥—å®ç”¨çš„æ”¹å–„æ–¹æ¡ˆ<br>
                    âœ“ ä¸€ä»½è´´å¿ƒçš„æˆé•¿èµ„æºåŒ…
                </p>
                
                <div class="payment-section">
                    <div class="quick-pay-buttons">
                        <a href="https://qr.alipay.com/tsx15981nt9c4aydmvo2h3d" class="payment-btn alipay">
                            <span class="icon">âš¡</span> æ”¯ä»˜å®å¿«æ·æ”¯ä»˜
                        </a>
                        <a href="javascript:void(0);" onclick="showWechatScan()" class="payment-btn wechat">
                            <span class="icon">âš¡</span> å¾®ä¿¡å¿«æ·æ”¯ä»˜
                        </a>
                    </div>
            
                    <div class="divider-or"><span>æˆ–</span></div>
            
                    <div class="scan-payment">
                        <div class="scan-title">ğŸ“± æ‰«ç æ”¯ä»˜</div>
                        <div class="qr-code-grid">
                            <div class="qr-code-item">
                                <img src="wechat_qrcode.jpg" alt="å¾®ä¿¡æ”¶æ¬¾ç " id="wechatQR" style="width: 140px; height: 140px; border-radius: 8px;">
                                <a href="wechat_qrcode.jpg" download="wechat_pay_qr.jpg" class="btn-save">
                                    ä¿å­˜å¾®ä¿¡ç 
                                </a>
                            </div>
                            <div class="qr-code-item">
                                <img src="alipay_qrcode.png" alt="æ”¯ä»˜å®æ”¶æ¬¾ç " id="alipayQR" style="width: 140px; height: 140px; border-radius: 8px;">
                                <a href="alipay_qrcode.png" download="alipay_pay_qr.png" class="btn-save">
                                    ä¿å­˜æ”¯ä»˜å®ç 
                                </a>
                            </div>
                        </div>
                        <div class="scan-tip">
                            ğŸ’¡ ä¿å­˜åæ‰“å¼€APP â†’ æ‰«ä¸€æ‰« â†’ ç›¸å†Œé€‰æ‹©
                        </div>
                    </div>
            
                    <div class="divider-or"><span>æˆ–</span></div>
            
                    <div class="transfer-payment">
                        <div class="transfer-title">ğŸ’³ å¤åˆ¶è´¦å·è½¬è´¦</div>
                        <div class="copy-item">
                            <span id="wechatID">jsh9109</span>
                            <button onclick="copyToClipboard('jsh9109', this)">å¤åˆ¶å¾®ä¿¡</button>
                        </div>
                        <div class="copy-item">
                            <span id="alipayID">313360631@qq.com</span>
                            <button onclick="copyToClipboard('313360631@qq.com', this)">å¤åˆ¶æ”¯ä»˜å®</button>
                        </div>
                    </div>
                </div>
                <label for="paymentProofInput" class="btn btn-primary" style="margin-top: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                    ğŸ“¸ ä¸Šä¼ ä»˜æ¬¾æˆªå›¾ï¼ŒæŸ¥çœ‹å®Œæ•´æŠ¥å‘Š
                </label>
                <input type="file" id="paymentProofInput" accept="image/*" onchange="handlePaymentProof(event)" style="display: none;">
                
            </div>
        </div>
        
        <div id="fullReportPage" class="card hidden">
            <div class="thank-banner">
                <h3>ğŸ’– æ„Ÿè°¢ä½ çš„æ”¯æŒï¼</h3>
                <p>å®Œæ•´æ·±åº¦æŠ¥å‘Šå·²ä¸ºä½ ç”Ÿæˆï¼Œè¯·ä¿å­˜æœ¬é¡µé¢éšæ—¶æŸ¥çœ‹</p>
            </div>
            
            <div class="result-banner">
                <h2>ğŸ’– ä½ çš„å æœ‰æ¬²å®Œæ•´åˆ†æ</h2>
                <div class="rpi-score" id="fullRpiScore">99</div>
                <div class="rpi-level" id="fullRpiLevel">æé«˜ï¼ˆçˆ±åˆ°æè‡´ï¼‰</div>
            </div>
            
            <div class="chart-container">
                <canvas id="fullRadarChart"></canvas>
            </div>
            
            <div class="report-section">
                <h3>ğŸ“Š ç¬¬ä¸€éƒ¨åˆ†ï¼šæ·±åº¦å¿ƒç†åˆ†æ</h3>
                <h4>ä½ çš„å æœ‰æ¬²ä»å“ªé‡Œæ¥ï¼Ÿ</h4>
                <p>ä½ çš„é«˜å æœ‰æ¬²è¡¨æ˜ä½ åœ¨äº²å¯†å…³ç³»ä¸­å­˜åœ¨å¼ºçƒˆçš„æ§åˆ¶éœ€æ±‚å’Œæƒ…æ„Ÿä¾èµ–ã€‚è¿™ç§æ¨¡å¼é€šå¸¸æºäºæ—©å¹´çš„æƒ…æ„Ÿç»å†â€”â€”å¯èƒ½æ˜¯åŸç”Ÿå®¶åº­ä¸­ç¼ºä¹ç¨³å®šçš„æƒ…æ„Ÿè¿æ¥ï¼Œæˆ–æ˜¯è¿‡å»çš„äº²å¯†å…³ç³»ä¸­ç»å†è¿‡èƒŒå›æˆ–æŠ›å¼ƒã€‚ä½ çš„å¤§è„‘å­¦ä¼šäº†é€šè¿‡"ç´§ç´§æŠ“ä½"æ¥é˜²æ­¢å¤±å»ï¼Œè¿™æˆä¸ºäº†ä¸€ç§è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚</p>
                
                <p>ä»å¿ƒç†å­¦è§’åº¦çœ‹ï¼Œä½ çš„å æœ‰æ¬²åæ˜ äº†"ç„¦è™‘å‹ä¾æ‹æ¨¡å¼"çš„æ ¸å¿ƒç‰¹å¾ã€‚ä½ å†…å¿ƒæ·±å¤„æœ‰ä¸€ä¸ªå£°éŸ³ä¸æ–­é—®ï¼š"TaçœŸçš„çˆ±æˆ‘å—ï¼ŸTaä¼šä¸ä¼šç¦»å¼€æˆ‘ï¼Ÿ"è¿™ç§ä¸å®‰å…¨æ„Ÿé©±ä½¿ä½ é€šè¿‡æ§åˆ¶å¯¹æ–¹çš„è¡Œä¸ºæ¥è·å¾—æš‚æ—¶çš„å®‰å¿ƒã€‚</p>
                
                <h4>æ½œæ„è¯†çš„ææƒ§æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
                <p>åœ¨ä½ çš„é«˜å æœ‰æ¬²èƒŒåï¼Œéšè—ç€ä¸‰ä¸ªæ ¸å¿ƒææƒ§ï¼š</p>
                <p><strong>1. è¢«æŠ›å¼ƒçš„ææƒ§</strong> - ä½ æœ€æ·±å±‚çš„ææƒ§æ˜¯"æˆ‘ä¼šè¢«ç•™ä¸‹ä¸€ä¸ªäºº"ã€‚æ¯å½“ä¼´ä¾£å’Œåˆ«äººäº’åŠ¨ï¼Œä½ çš„å¤§è„‘å°±ä¼šå‘å‡ºè­¦æŠ¥ã€‚</p>
                <p><strong>2. ä¸å¤Ÿå¥½çš„ææƒ§</strong> - ä½ å†…å¿ƒæ·±å¤„å¯èƒ½ä¸ç›¸ä¿¡è‡ªå·±å€¼å¾—è¢«çˆ±ã€‚æ‰€ä»¥ä½ éœ€è¦é€šè¿‡å æœ‰å¯¹æ–¹æ¥è¯æ˜è‡ªå·±çš„ä»·å€¼ã€‚</p>
                <p><strong>3. å¤±æ§çš„ææƒ§</strong> - äº²å¯†å…³ç³»ä¸­çš„ä¸ç¡®å®šæ€§è®©ä½ æåº¦ä¸å®‰ã€‚ä½ è¯•å›¾é€šè¿‡æ§åˆ¶æ¥è·å¾—"æŒæ§æ„Ÿ"ã€‚</p>
            </div>
            
            <div class="report-section">
                <h3>ğŸ‘¤ ç¬¬äºŒéƒ¨åˆ†ï¼š12ç§å æœ‰æ¬²äººæ ¼ç”»åƒ</h3>
                <div class="personality-types" id="paidTypeList">
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹1</div>
                        <div class="type-name">å¥åº·ç‹¬ç«‹å‹</div>
                        <div class="type-score">0-20åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹2</div>
                        <div class="type-name">è½»åº¦åœ¨æ„å‹</div>
                        <div class="type-score">21-35åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹3</div>
                        <div class="type-name">é€‚åº¦å…³æ³¨å‹</div>
                        <div class="type-score">36-50åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹4</div>
                        <div class="type-name">æ˜æ˜¾æ§åˆ¶å‹</div>
                        <div class="type-score">51-65åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹5</div>
                        <div class="type-name">å¼ºçƒˆä¾èµ–å‹</div>
                        <div class="type-score">66-75åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹6</div>
                        <div class="type-name">ç„¦è™‘ç¼ ç»•å‹</div>
                        <div class="type-score">76-82åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹7</div>
                        <div class="type-name">ç—…æ€å«‰å¦’å‹</div>
                        <div class="type-score">83-88åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹8</div>
                        <div class="type-name">å…±ä¾å­˜èåˆå‹</div>
                        <div class="type-score">89-94åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹9</div>
                        <div class="type-name">æç«¯å æœ‰å‹</div>
                        <div class="type-score">95-97åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹10</div>
                        <div class="type-name">çª’æ¯æ§åˆ¶å‹</div>
                        <div class="type-score">98-99åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹11</div>
                        <div class="type-name">å±é™©è¾¹ç¼˜å‹</div>
                        <div class="type-score">100åˆ†</div>
                    </div>
                    <div class="personality-type">
                        <div class="type-number">ç±»å‹12</div>
                        <div class="type-name">éœ€ä¸“ä¸šå¸®åŠ©å‹</div>
                        <div class="type-score">ç‰¹æ®Šæƒ…å†µ</div>
                    </div>
                </div>
                
                <h4>ä½ çš„ç±»å‹è¯¦è§£</h4>
                <p>ä½ å’Œä¼´ä¾£ä¹‹é—´çš„ç•Œé™å·²ç»æåº¦æ¨¡ç³Šã€‚ä½ éœ€è¦å¯¹æ–¹æ¥å®šä¹‰è‡ªå·±çš„ä»·å€¼å’Œå­˜åœ¨æ„Ÿã€‚è¿™æ˜¯ä¸€ç§"å…±ç”Ÿ"çŠ¶æ€â€”â€”ä½ ä»¬ä¸å†æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¸ªä½“åœ¨ç›¸çˆ±ï¼Œè€Œæ˜¯ä½ æŠŠè‡ªå·±å®Œå…¨èå…¥äº†å¯¹æ–¹ã€‚</p>
            </div>
            
            <div class="report-section">
                <h3>ğŸ’¡ ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ‹çˆ±æ¨¡å¼ä¼˜åŒ–æ–¹æ¡ˆ</h3>
                
                <div class="action-plan">
                    <h4>30å¤©æƒ…æ„Ÿè¾¹ç•Œå»ºç«‹è®¡åˆ’</h4>
                    <ul>
                        <li>ç¬¬1-10å¤©ï¼šæ¯æ—¥æƒ…ç»ªæ—¥è®°ï¼Œè¯†åˆ«è§¦å‘ç‚¹å’Œèº«ä½“ä¿¡å·</li>
                        <li>ç¬¬11-20å¤©ï¼šå»¶è¿Ÿååº”ç»ƒä¹ ï¼Œç‹¬ç«‹ç©ºé—´æŒ‘æˆ˜ï¼Œé‡å»ºç¤¾äº¤åœˆ</li>
                        <li>ç¬¬21-30å¤©ï¼šæ¯å‘¨çº¦ä¼šæ—¥ï¼Œä¿¡ä»»ä»ªå¼ï¼Œæƒ…ç»ªç®¡ç†æŠ€å·§</li>
                    </ul>
                </div>
                
                <h4>5ç§å¥åº·æ²Ÿé€šè¯æœ¯</h4>
                <p style="background: #e8f5e9; padding: 15px; border-radius: 8px; color: #2e7d32;">
                    <strong>åœºæ™¯1ï¼šå¯¹æ–¹å’Œå¼‚æ€§æœ‹å‹å‡ºå»</strong><br>
                    âœ… "å®è´ï¼Œæˆ‘çŸ¥é“ä½ éœ€è¦æœ‹å‹åœˆï¼Œæˆ‘ä¹Ÿåœ¨ç»ƒä¹ ç»™ä½ è‡ªç”±ã€‚å»ç©å¼€å¿ƒï¼Œæœ‰ç©ºäº†è·Ÿæˆ‘åˆ†äº«ä»Šå¤©çš„è¶£äº‹å§ğŸ’•"
                </p>
                
                <p style="background: #e8f5e9; padding: 15px; border-radius: 8px; color: #2e7d32; margin-top: 15px;">
                    <strong>åœºæ™¯2ï¼šå¯¹æ–¹å¾ˆä¹…ä¸å›æ¶ˆæ¯</strong><br>
                    âœ… "çœ‹èµ·æ¥ä½ å¾ˆå¿™å‘€ï¼Œä¸æ€¥ç€å›ï½æˆ‘å…ˆå»åšè‡ªå·±çš„äº‹ï¼Œç­‰ä½ æœ‰ç©ºäº†å†èŠğŸ˜Š"
                </p>
            </div>
            
            <div class="report-section">
                <h3>ğŸ“š ç¬¬å››éƒ¨åˆ†ï¼šæˆé•¿èµ„æºåŒ…</h3>
                
                <div class="resource-grid">
                    <div class="resource-card">
                        <div class="resource-icon">ğŸ“–</div>
                        <div class="resource-title">æ¨èä¹¦ç±</div>
                        <div class="resource-list">
                            1. ã€Šä¾æ‹ã€‹<br>
                            2. ã€Šäº²å¯†å…³ç³»ã€‹<br>
                            3. ã€Šçˆ±çš„è‰ºæœ¯ã€‹<br>
                            4. ã€Šæƒ…æ„Ÿå‹’ç´¢ã€‹<br>
                            5. ã€Šéæš´åŠ›æ²Ÿé€šã€‹
                        </div>
                    </div>
                    
                    <div class="resource-card">
                        <div class="resource-icon">ğŸ“</div>
                        <div class="resource-title">ä¸“ä¸šè¯¾ç¨‹</div>
                        <div class="resource-list">
                            1. ç®€å•å¿ƒç†<br>
                            2. å£¹å¿ƒç†<br>
                            3. KnowYourself
                        </div>
                    </div>
                    
                    <div class="resource-card">
                        <div class="resource-icon">ğŸ‘¥</div>
                        <div class="resource-title">ç¤¾ç¾¤æ¨è</div>
                        <div class="resource-list">
                            1. å°çº¢ä¹¦ç¤¾ç¾¤<br>
                            2. è±†ç“£å°ç»„<br>
                            3. å¾®ä¿¡å…¬ä¼—å·
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="report-section">
                <h3>âš ï¸ é¿å‘æŒ‡å—</h3>
                
                <div class="dos-donts">
                    <div class="donts-card">
                        <h4>âŒ åƒä¸‡åˆ«åšçš„3ä»¶äº‹</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 10px 0; border-bottom: 1px solid #ffcdd2;">
                                <strong>1. æŸ¥æ‰‹æœº/ç›‘æ§ç¤¾äº¤åª’ä½“</strong><br>
                                è¿™ç§è¡Œä¸ºå·²ç»ç ´åäº†ä¿¡ä»»çš„åŸºç¡€
                            </li>
                            <li style="padding: 10px 0; border-bottom: 1px solid #ffcdd2;">
                                <strong>2. ç”¨å¨èƒæˆ–æƒ…ç»ªå‹’ç´¢æ§åˆ¶</strong><br>
                                é•¿æœŸä¸‹å»ï¼Œå¯¹æ–¹è¦ä¹ˆéº»æœ¨è¦ä¹ˆçˆ†å‘
                            </li>
                            <li style="padding: 10px 0;">
                                <strong>3. è¦æ±‚å¯¹æ–¹æ”¾å¼ƒæœ‹å‹/å…´è¶£</strong><br>
                                ä½ è¶Šé™åˆ¶ï¼Œå¯¹æ–¹è¶Šæƒ³é€ƒ
                            </li>
                        </ul>
                    </div>
                    
                    <div class="dos-card">
                        <h4>âœ… ä¸€å®šè¦åšçš„3ä»¶äº‹</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 10px 0; border-bottom: 1px solid #a5d6a7;">
                                <strong>1. æ‰¿è®¤é—®é¢˜ï¼Œå¯»æ±‚å¸®åŠ©</strong><br>
                                è¿™ç§è„†å¼±å’ŒçœŸè¯šåè€Œä¼šæ‹‰è¿‘è·ç¦»
                            </li>
                            <li style="padding: 10px 0; border-bottom: 1px solid #a5d6a7;">
                                <strong>2. åŸ¹å…»ç‹¬ç«‹çš„è‡ªæˆ‘</strong><br>
                                é‡æ–°æ‰¾å›è‡ªå·±çš„å…´è¶£å’Œæœ‹å‹åœˆ
                            </li>
                            <li style="padding: 10px 0;">
                                <strong>3. å­¦ä¼šè‡ªæˆ‘å®‰æŠš</strong><br>
                                ä¸è¦ç«‹åˆ»æ‰¾å¯¹æ–¹"è¦"å®‰å…¨æ„Ÿ
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="report-section">
                <h3>ğŸ¯ ç«‹å³å¯å®è·µçš„è¡ŒåŠ¨æ¸…å•</h3>
                
                <div class="action-plan" style="background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);">
                    <h4>ä»Šå¤©å°±å¯ä»¥åšçš„5ä»¶äº‹</h4>
                    <ul>
                        <li>ç»™ä¼´ä¾£å‘ä¸€æ¡æ¸©æš–çš„æ¶ˆæ¯è¡¨è¾¾æ„Ÿè°¢</li>
                        <li>ä¸‹è½½ä¸€ä¸ªå†¥æƒ³APPå®Œæˆç¬¬ä¸€ä¸ªç»ƒä¹ </li>
                        <li>å†™ä¸‹ä½ çš„3ä¸ªæ ¸å¿ƒææƒ§</li>
                        <li>è”ç³»ä¸€ä¸ªå¾ˆä¹…æ²¡è”ç³»çš„æœ‹å‹</li>
                        <li>å½“æƒ³æŸ¥å¯¹æ–¹æ‰‹æœºæ—¶ï¼Œå…ˆç­‰10åˆ†é’Ÿåšæ·±å‘¼å¸</li>
                    </ul>
                </div>
                
                <p style="text-align: center; margin: 30px 0; color: #666; font-size: 1.1em; line-height: 1.8;">
                    ğŸ’ æ”¹å˜éœ€è¦æ—¶é—´å’Œè€å¿ƒï¼Œå¯¹è‡ªå·±æ¸©æŸ”ä¸€ç‚¹ã€‚<br>
                    ä½ å·²ç»è¿ˆå‡ºäº†æœ€é‡è¦çš„ä¸€æ­¥â€”â€”æ‰¿è®¤é—®é¢˜å¹¶å¯»æ±‚æ”¹å˜ã€‚<br>
                    è¿™æœ¬èº«å°±éœ€è¦å·¨å¤§çš„å‹‡æ°”ã€‚<br><br>
                    
                    è®°ä½ï¼šçœŸæ­£çš„çˆ±æ˜¯ç»™å¯¹æ–¹è‡ªç”±çš„åŒæ—¶ï¼Œç›¸ä¿¡Taä¼šé€‰æ‹©ç•™ä¸‹æ¥ã€‚<br>
                    è€Œä½ å€¼å¾—æ‹¥æœ‰ä¸€æ®µå¥åº·ã€å¹³ç­‰ã€ç›¸äº’æ»‹å…»çš„å…³ç³»ã€‚<br><br>
                    
                    åŠ æ²¹ï¼æˆ‘ä»¬ç›¸ä¿¡ä½ å¯ä»¥åšåˆ° ğŸŒŸ
                </p>
            </div>
            
            <button class="btn btn-primary" onclick="generateReportImage()" style="margin-bottom: 15px; background: #FF9800; box-shadow: 0 8px 25px rgba(255, 152, 0, 0.3);">ğŸ–¼ï¸ ç”ŸæˆæŠ¥å‘Šå¡ç‰‡ (ä¿å­˜åˆ†äº«)</button>
            
            <div id="saveModal" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; overflow-y: auto; padding: 20px; display: none; flex-direction: column; align-items: center;">
                <div style="color: white; font-size: 18px; margin-bottom: 15px; font-weight: bold; text-align: center;">ğŸ‘‡ é•¿æŒ‰ä¸‹æ–¹å›¾ç‰‡ä¿å­˜åˆ°ç›¸å†Œ ğŸ‘‡</div>
                <img id="generatedReportImg" style="width: 100%; max-width: 450px; border-radius: 10px; box-shadow: 0 0 20px rgba(255,255,255,0.2);">
                <button class="btn btn-secondary" onclick="closeSaveModal()" style="margin-top: 20px; width: auto; padding: 10px 30px; background: white; color: #333; border: none;">å…³é—­</button>
            </div>

            <button class="btn btn-secondary" onclick="location.reload()">é‡æ–°æµ‹è¯„</button>
        </div>
        
        <div id="adminPanel" class="card hidden">
            <div class="admin-panel">
                <h2>ğŸ” ç®¡ç†å‘˜åå°</h2>
                
                <div class="input-group">
                    <input type="password" id="adminPassword" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ">
                </div>
                
                <button class="btn btn-primary" onclick="verifyAdmin()">ç™»å½•</button>
                
                <div id="adminContent" class="hidden">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalCards">0</div>
                            <div class="stat-label">å¡å¯†æ€»æ•°</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="usedCards">0</div>
                            <div class="stat-label">å·²ä½¿ç”¨</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="unusedCards">0</div>
                            <div class="stat-label">æœªä½¿ç”¨</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="deviceCount">0</div>
                            <div class="stat-label">ç»‘å®šè®¾å¤‡æ•°</div>
                        </div>
                    </div>
                    
                    <h3 style="margin: 30px 0 15px 0;">ç”Ÿæˆå¡å¯†</h3>
                    <div class="input-group">
                        <input type="number" id="cardCount" placeholder="è¾“å…¥ç”Ÿæˆæ•°é‡ï¼ˆ1-1000ï¼‰" min="1" max="1000" value="10">
                    </div>
                    <button class="btn btn-primary" onclick="generateCards()">ç”Ÿæˆå¡å¯†</button>
                    
                    <h3 style="margin: 30px 0 15px 0;">æœ€è¿‘ä½¿ç”¨è®°å½•</h3>
                    <div class="recent-records" id="recentRecords">
                        <div class="record-item">æš‚æ— è®°å½•</div>
                    </div>
                    
                    <button class="btn btn-secondary" onclick="backToMain()">è¿”å›ä¸»é¡µ</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const ADMIN_PASSWORD = 'lss900201';
        
        const questions = [
            /* --- ç»´åº¦0: æ§åˆ¶æ¬²æœ› --- */
            {text: 'å½“TAå’Œå¼‚æ€§æœ‹å‹å•ç‹¬å‡ºå»æ—¶ï¼Œä½ ä¼šæ„Ÿåˆ°ä¸å®‰æˆ–æƒ³è¦é˜»æ­¢å—ï¼Ÿ', dimension: 0},
            {text: 'TAå‘æœ‹å‹åœˆæ—¶ï¼Œä½ ä¼šä»”ç»†æŸ¥çœ‹è°ç»™TAç‚¹èµå’Œè¯„è®ºå—ï¼Ÿ', dimension: 0},
            {text: 'ä½ è§‰å¾—æœ‰å¿…è¦çŸ¥é“TAçš„æ‰‹æœº/ç¤¾äº¤è´¦å·å¯†ç å—ï¼Ÿ', dimension: 0},
            {text: 'ä½ ä¼šä¸»åŠ¨æŸ¥çœ‹TAçš„ç¤¾äº¤åª’ä½“åŠ¨æ€å—ï¼Ÿ', dimension: 0},
            {text: 'å½“TAä¸åœ¨èº«è¾¹æ—¶ï¼Œä½ å¸Œæœ›TAä¸»åŠ¨å‘ä½ æŠ¥å‘Šè¡Œè¸ªå—ï¼Ÿ', dimension: 0},
            {text: 'ä½ ä¼šè¦æ±‚TAå‡å°‘å’ŒæŸäº›å¼‚æ€§æœ‹å‹çš„æ¥å¾€å—ï¼Ÿ', dimension: 0},
            {text: 'TAåœ¨èšä¼šä¸Šå’Œåˆ«äººèŠå¾—å¾ˆå¼€å¿ƒï¼Œä½ ä¼šæ„Ÿåˆ°è¢«å¿½è§†æˆ–ä¸èˆ’æœå—ï¼Ÿ', dimension: 0},
            {text: 'ä½ æœ‰æƒ³è¿‡è¦æŸ¥çœ‹TAçš„èŠå¤©è®°å½•å—ï¼Ÿ', dimension: 0},
            {text: 'ä½ å¸Œæœ›è‡ªå·±æˆä¸ºTAç”Ÿæ´»ä¸­æœ€é‡è¦çš„äººå—ï¼Ÿ', dimension: 0},
            {text: 'å½“TAæ‹’ç»ä½ çš„è¦æ±‚ï¼ˆå¦‚æŠ¥å¤‡ã€ç§’å›æ¶ˆæ¯ç­‰ï¼‰ï¼Œä½ ä¼šç”Ÿæ°”å—ï¼Ÿ', dimension: 0},
            
            /* --- ç»´åº¦1: å«‰å¦’å¼ºåº¦ --- */
            {text: 'çœ‹åˆ°TAå’Œå¼‚æ€§è°ˆç¬‘é£ç”Ÿï¼Œä½ ä¼šæ„Ÿåˆ°å«‰å¦’å—ï¼Ÿ', dimension: 1},
            {text: 'TAæ— æ„ä¸­æèµ·å‰ä»»æ—¶ï¼Œä½ ä¼šæƒ…ç»ªæ³¢åŠ¨å¾ˆå¤§å—ï¼Ÿ', dimension: 1},
            {text: 'å½“TAå¤¸å¥–å…¶ä»–å¼‚æ€§æ—¶ï¼Œä½ ä¼šè§‰å¾—TAä¸å¤Ÿçˆ±ä½ å—ï¼Ÿ', dimension: 1},
            {text: 'çœ‹åˆ°TAç»™å¼‚æ€§çš„åŠ¨æ€ç‚¹èµæˆ–è¯„è®ºï¼Œä½ ä¼šåœ¨æ„å—ï¼Ÿ', dimension: 1},
            {text: 'å½“TAçš„å¼‚æ€§æœ‹å‹æ¯”ä½ ä¼˜ç§€æ—¶ï¼Œä½ ä¼šæ„Ÿåˆ°å¨èƒæˆ–è‡ªå‘å—ï¼Ÿ', dimension: 1},
            {text: 'TAè¯´"æŸæŸäººçœŸå‰å®³/çœŸå¥½çœ‹"æ—¶ï¼Œä½ ä¼šä¸é«˜å…´å—ï¼Ÿ', dimension: 1},
            {text: 'TAè¦å‚åŠ æœ‰å¼‚æ€§çš„èšä¼šï¼Œä½ ä¼šæ‹…å¿ƒæˆ–æƒ³è¦é˜»æ­¢å—ï¼Ÿ', dimension: 1},
            {text: 'çœ‹åˆ°TAå¯¹é™Œç”Ÿå¼‚æ€§è¡¨ç°å‹å¥½ï¼ˆå¦‚å¾®ç¬‘ã€æ‰“æ‹›å‘¼ï¼‰ï¼Œä½ ä¼šåƒé†‹å—ï¼Ÿ', dimension: 1},
            {text: 'TAçš„æ‰‹æœºæ”¶åˆ°å¼‚æ€§æ¶ˆæ¯ï¼Œä½ ä¼šå¾ˆæƒ³çŸ¥é“å†…å®¹å—ï¼Ÿ', dimension: 1},
            {text: 'ä½ ä¼šç»å¸¸è„‘è¡¥TAå’Œå‰ä»»/å…¶ä»–å¼‚æ€§åœ¨ä¸€èµ·çš„ç”»é¢å—ï¼Ÿ', dimension: 1},
            
            /* --- ç»´åº¦2: æƒ…æ„Ÿä¾èµ– --- */
            {text: 'å¦‚æœä¸€æ•´å¤©æ²¡æœ‰TAçš„æ¶ˆæ¯ï¼Œä½ ä¼šç„¦è™‘ä¸å®‰å—ï¼Ÿ', dimension: 2},
            {text: 'ä½ çš„å¿ƒæƒ…å¥½åå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºTAçš„æ€åº¦å—ï¼Ÿ', dimension: 2},
            {text: 'å½“TAå¾ˆä¹…ä¸å›æ¶ˆæ¯æ—¶ï¼Œä½ ä¼šåå¤å‘æ¶ˆæ¯æˆ–æ‰“ç”µè¯å—ï¼Ÿ', dimension: 2},
            {text: 'ä½ æœ‰è¿‡"æ²¡æœ‰TAæˆ‘æ´»ä¸ä¸‹å»"è¿™æ ·çš„æƒ³æ³•å—ï¼Ÿ', dimension: 2},
            {text: 'åšé‡è¦å†³å®šæ—¶ï¼Œä½ å¿…é¡»è¦å¬TAçš„æ„è§æ‰èƒ½å®‰å¿ƒå—ï¼Ÿ', dimension: 2},
            {text: 'TAå·²ç»æˆä¸ºä½ ç”Ÿæ´»çš„å…¨éƒ¨é‡å¿ƒäº†å—ï¼Ÿ', dimension: 2},
            {text: 'å½“TAå¿ƒæƒ…ä¸å¥½æ—¶ï¼Œä½ ä¹Ÿä¼šè·Ÿç€æƒ…ç»ªä½è½å—ï¼Ÿ', dimension: 2},
            {text: 'ä½ ä¼šä¸ºäº†è®©TAå¼€å¿ƒè€Œè¿èƒŒè‡ªå·±çš„åŸåˆ™æˆ–åº•çº¿å—ï¼Ÿ', dimension: 2},
            {text: 'å’ŒTAåˆ†å¼€å‡ å¤©åï¼Œä½ ä¼šæ„Ÿåˆ°å¼ºçƒˆçš„æ€å¿µç”šè‡³éš¾ä»¥å¿å—å—ï¼Ÿ', dimension: 2},
            {text: 'ä½ çš„è‡ªæˆ‘ä»·å€¼æ„Ÿå¾ˆä¾èµ–TAå¯¹ä½ çš„è¯„ä»·å’Œè‚¯å®šå—ï¼Ÿ', dimension: 2},
            
            /* --- ç»´åº¦3: å…³ç³»ä¸å®‰ --- */
            {text: 'ä½ ç»å¸¸ä¼šæ‹…å¿ƒTAæœ‰ä¸€å¤©ä¼šç¦»å¼€ä½ å—ï¼Ÿ', dimension: 3},
            {text: 'ä½ éœ€è¦TAé¢‘ç¹åœ°ç¡®è®¤"ä½ çˆ±æˆ‘å—"æ‰èƒ½å®‰å¿ƒå—ï¼Ÿ', dimension: 3},
            {text: 'å½“TAè¯´"éœ€è¦ç‹¬å¤„ç©ºé—´"æ—¶ï¼Œä½ ä¼šè§‰å¾—TAä¸çˆ±ä½ äº†å—ï¼Ÿ', dimension: 3},
            {text: 'ä½ ç»å¸¸è§‰å¾—è‡ªå·±ä¸å¤Ÿå¥½ã€é…ä¸ä¸ŠTAå—ï¼Ÿ', dimension: 3},
            {text: 'TAæ€åº¦ç¨å¾®å†·æ·¡ä¸€ç‚¹ï¼Œä½ å°±ä¼šæƒ³"TAæ˜¯ä¸æ˜¯ä¸çˆ±æˆ‘äº†"å—ï¼Ÿ', dimension: 3},
            {text: 'ä½ å®³æ€•TAäº†è§£çœŸå®çš„ä½ åä¼šå¤±æœ›ç¦»å¼€å—ï¼Ÿ', dimension: 3},
            {text: 'å½“TAå’Œä½ æ„è§ä¸åŒæ—¶ï¼Œä½ ä¼šæ‹…å¿ƒå½±å“æ„Ÿæƒ…è€Œé€‰æ‹©å¦¥åå—ï¼Ÿ', dimension: 3},
            {text: 'ä½ ä¼šç»å¸¸æƒ³"æˆ‘ä»¬ä¼šä¸ä¼šåˆ†æ‰‹"è¿™æ ·çš„é—®é¢˜å—ï¼Ÿ', dimension: 3},
            {text: 'ä½ æ€»è§‰å¾—è¿™æ®µå…³ç³»ä¸ç¨³å®šã€ç¼ºä¹å®‰å…¨æ„Ÿå—ï¼Ÿ', dimension: 3},
            {text: 'å½“TAæ¥è§¦æ–°æœ‹å‹æˆ–æ–°åœˆå­æ—¶ï¼Œä½ ä¼šæ‹…å¿ƒTAä¸å†éœ€è¦ä½ å—ï¼Ÿ', dimension: 3}
        ];
        
        const options = ['å®Œå…¨ä¸ä¼š', 'å¾ˆå°‘è¿™æ ·', 'æœ‰æ—¶ä¼š', 'ç»å¸¸ä¼š', 'æ€»æ˜¯è¿™æ ·'];
        
        let currentPage = 'verify';
        let currentQuestion = 0;
        let answers = new Array(40).fill(0);
        let currentCard = null;
        
        function getDeviceFingerprint() {
            try {
                let canvasFingerprint = '';
                try {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    if (ctx) {
                        ctx.textBaseline = 'top';
                        ctx.font = '14px Arial';
                        ctx.fillText('fingerprint', 2, 2);
                        canvasFingerprint = canvas.toDataURL().slice(-50);
                    }
                } catch (e) {
                    canvasFingerprint = Date.now().toString();
                }
                
                const fingerprint = [
                    navigator.userAgent || 'unknown',
                    navigator.language || 'unknown',
                    (screen.width || 0) + 'x' + (screen.height || 0),
                    screen.colorDepth || 0,
                    new Date().getTimezoneOffset(),
                    canvasFingerprint
                ].join('|');
                
                let hash = 0;
                for (let i = 0; i < fingerprint.length; i++) {
                    const char = fingerprint.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                
                return 'device_' + Math.abs(hash).toString(36);
            } catch (error) {
                return 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            }
        }
        
        /* --- [V3.1] ä¿®å¤å¡å¯†ç»‘å®šé€»è¾‘ --- */
        function verifyCard() {
            const cardInput = document.getElementById('cardInput');
            const errorDiv = document.getElementById('errorMessage');
            const cardCode = cardInput.value.trim().toUpperCase();
            // [V3.3] å®šä¹‰ä¸‡èƒ½å¡å¯†
    const MASTER_CODE = "GEMINI-MASTER";

    // æ£€æŸ¥æ˜¯å¦ä¸ºä¸‡èƒ½å¡å¯†ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è·³è¿‡æ‰€æœ‰ç»‘å®šå’ŒéªŒè¯
    if (cardCode === MASTER_CODE) {
        currentCard = MASTER_CODE;
        // è°ƒç”¨ showTestPage() å‡½æ•°ï¼Œè¿›å…¥ç­”é¢˜é¡µé¢
        showTestPage(); 
        return; // ç«‹å³é€€å‡º verifyCard å‡½æ•°
    }
            if (!cardCode) {
                errorDiv.textContent = 'è¯·è¾“å…¥æµ‹è¯„å¡å·';
                errorDiv.style.display = 'block';
                return;
            }
            
            // [V3.0] å…è®¸ TF- å’Œé TF- æ ¼å¼
            if (!/^TF-[A-Z0-9]{4}-[A-Z0-9]{4}$/.test(cardCode)) {
                 if (!/^[A-Z0-9]{8,20}$/.test(cardCode)) {
                    errorDiv.textContent = 'å¡å·æ ¼å¼ä¸æ­£ç¡®';
                    errorDiv.style.display = 'block';
                    return;
                }
            }
            
            const deviceId = getDeviceFingerprint();
            // [V3.0] å…³é”®ä¿®å¤ï¼šä½¿ç”¨ 'loveCards' é¿å…å’Œç¬¬ä¸€ä¸ªé¡¹ç›®å†²çª
            let cards = JSON.parse(localStorage.getItem('loveCards') || '[]');
            let card = cards.find(c => c.code === cardCode);
            
            // --- [V3.1] é€»è¾‘ä¿®æ­£å¼€å§‹ ---
            if (!card) {
                // å¦‚æœå¡å·ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºå®ƒï¼Œå¹¶ç»‘å®šåˆ°å½“å‰è®¾å¤‡
                card = { 
                    code: cardCode, 
                    deviceId: deviceId, // ç«‹å³ç»‘å®š
                    createdAt: new Date().toISOString(),
                    firstUsedAt: new Date().toISOString(),
                    testCount: 0 // åˆå§‹æµ‹è¯•æ¬¡æ•°
                };
                cards.push(card);

            } else {
                // å¦‚æœå¡å·å­˜åœ¨ï¼Œæ£€æŸ¥è®¾å¤‡ID
                if (card.deviceId && card.deviceId !== deviceId) {
                    errorDiv.textContent = 'è¯¥å¡å·å·²åœ¨å…¶ä»–è®¾å¤‡ä½¿ç”¨ï¼Œæ— æ³•åœ¨æœ¬è®¾å¤‡ä½¿ç”¨';
                    errorDiv.style.display = 'block';
                    return;
                }
                
                // (å…¼å®¹æ—§å¡) å¦‚æœæ‰¾åˆ°å¡ï¼Œä½†å®ƒæ²¡æœ‰deviceIdï¼Œå°±ç»‘å®šå®ƒ
                if (!card.deviceId) {
                    card.deviceId = deviceId;
                    card.firstUsedAt = new Date().toISOString();
                }
            }
            // --- [V3.1] é€»è¾‘ä¿®æ­£ç»“æŸ ---
            
            card.testCount = (card.testCount || 0) + 1;
            card.lastUsedAt = new Date().toISOString();
            
            // [V3.0] å…³é”®ä¿®å¤ï¼šä½¿ç”¨ 'loveCards'
            localStorage.setItem('loveCards', JSON.stringify(cards));
            
            currentCard = card;
            showTestPage();
        }
        
        function showTestPage() {
            document.getElementById('cardVerifyPage').classList.add('hidden');
            document.getElementById('testPage').classList.remove('hidden');
            currentPage = 'test';
            currentQuestion = 0;
            answers = new Array(40).fill(0);
            renderQuestion();
        }
        
        function renderQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionText').textContent = `Q${currentQuestion + 1}: ${question.text}`;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                if (answers[currentQuestion] === index + 1) {
                    optionDiv.classList.add('selected');
                }
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectOption(index + 1);
                optionsContainer.appendChild(optionDiv);
            });
            
            const progress = ((currentQuestion + 1) / 40) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `ç¬¬${currentQuestion + 1}é¢˜ / å…±40é¢˜`;
            
            document.getElementById('prevBtn').style.display = currentQuestion > 0 ? 'block' : 'none';
            document.getElementById('nextBtn').textContent = currentQuestion === 39 ? 'å®Œæˆæµ‹è¯„ âœ“' : 'ä¸‹ä¸€é¢˜ â†’';
        }
        
        function selectOption(value) {
            answers[currentQuestion] = value;
            // [V3.0] è‡ªåŠ¨ä¸‹ä¸€é¢˜
            if (currentQuestion < 39) {
                nextQuestion();
            } else {
                renderQuestion(); // åˆ·æ–°æœ€åä¸€ä¸ªé—®é¢˜çš„é€‰ä¸­çŠ¶æ€
            }
        }
        
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        }
        
        function nextQuestion() {
            if (answers[currentQuestion] === 0) {
                alert('è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹');
                return;
            }
            
            if (currentQuestion < 39) {
                currentQuestion++;
                renderQuestion();
            } else {
                calculateResult();
            }
        }
        
        function calculateResult() {
            const dimensionScores = [0, 0, 0, 0];
            const dimensionCounts = [0, 0, 0, 0];
            
            questions.forEach((q, i) => {
                dimensionScores[q.dimension] += answers[i];
                dimensionCounts[q.dimension]++;
            });
            
            // [V3.0] ç»Ÿä¸€ç®—æ³•ï¼š( (avg_score) * 4 ) -> æ»¡åˆ† (5 * 4 = 20), æœ€ä½ (1 * 4 = 4)
            const finalScores = dimensionScores.map((score, i) => 
                Math.round((score / dimensionCounts[i]) * 4) // ä¿æŒ 1-5åˆ† -> 4-20åˆ†
            );
            
            const totalScore = finalScores.reduce((a, b) => a + b, 0); // æ»¡åˆ† 80 (4*20)
            const rpiIndex = Math.round((totalScore / 80) * 100); // æ¢ç®—æˆç™¾åˆ†åˆ¶
            
            let typeName = '', typeDesc = '', percentile = 0;
            
            if (rpiIndex <= 20) {
                typeName = 'å¥åº·ç‹¬ç«‹å‹';
                typeDesc = 'ä½ åœ¨å…³ç³»ä¸­ä¿æŒäº†å¾ˆå¥½çš„ç‹¬ç«‹æ€§å’Œç•Œé™æ„Ÿã€‚';
                percentile = 15;
            } else if (rpiIndex <= 35) {
                typeName = 'è½»åº¦åœ¨æ„å‹';
                typeDesc = 'ä½ æœ‰ä¸€å®šçš„å æœ‰æ¬²ï¼Œä½†ä»åœ¨å¥åº·èŒƒå›´å†…ã€‚';
                percentile = 30;
            } else if (rpiIndex <= 50) {
                typeName = 'é€‚åº¦å…³æ³¨å‹';
                typeDesc = 'ä½ çš„å æœ‰æ¬²å¤„äºä¸­ç­‰æ°´å¹³ã€‚';
                percentile = 50;
            } else if (rpiIndex <= 65) {
                typeName = 'æ˜æ˜¾æ§åˆ¶å‹';
                typeDesc = 'ä½ çš„å æœ‰æ¬²è¾ƒå¼ºï¼Œå»ºè®®å­¦ä¹ å»ºç«‹å¥åº·çš„è¾¹ç•Œã€‚';
                percentile = 70;
            } else if (rpiIndex <= 75) {
                typeName = 'å¼ºçƒˆä¾èµ–å‹';
                typeDesc = 'ä½ å¯¹ä¼´ä¾£æœ‰å¾ˆå¼ºçš„ä¾èµ–æ„Ÿï¼Œå»ºè®®åŸ¹å…»ç‹¬ç«‹æ€§ã€‚';
                percentile = 80;
            } else if (rpiIndex <= 82) {
                typeName = 'ç„¦è™‘ç¼ ç»•å‹';
                typeDesc = 'ä½ å¤„äºæŒç»­çš„ç„¦è™‘ä¸­ï¼Œå¼ºçƒˆå»ºè®®å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€‚';
                percentile = 87;
            } else if (rpiIndex <= 88) {
                typeName = 'ç—…æ€å«‰å¦’å‹';
                typeDesc = 'ä½ çš„å«‰å¦’å¿ƒæå¼ºï¼Œå¾ˆéš¾æ§åˆ¶è‡ªå·±çš„æƒ…ç»ªã€‚';
                percentile = 92;
            } else if (rpiIndex <= 94) {
                typeName = 'å…±ä¾å­˜èåˆå‹';
                typeDesc = 'ä¸ä¼´ä¾£è¿‡åº¦èåˆï¼Œç•Œé™æ¨¡ç³Šï¼Œå¤±å»è‡ªæˆ‘ã€‚';
                percentile = 96;
            } else if (rpiIndex <= 97) {
                typeName = 'æç«¯å æœ‰å‹';
                typeDesc = 'ä½ çš„å æœ‰æ¬²å·²ç»åˆ°äº†æç«¯çš„ç¨‹åº¦ã€‚';
                percentile = 98;
            } else {
                typeName = 'çª’æ¯æ§åˆ¶å‹';
                typeDesc = 'ä½ çš„æ§åˆ¶æ¬²è®©ä¼´ä¾£æ„Ÿåˆ°çª’æ¯ï¼Œå…³ç³»å¤„äºå´©æºƒè¾¹ç¼˜ã€‚';
                percentile = 99;
            }
            
            sessionStorage.setItem('testResult', JSON.stringify({
                scores: finalScores,
                totalScore: totalScore,
                rpiIndex: rpiIndex,
                typeName: typeName,
                typeDesc: typeDesc,
                percentile: percentile
            }));
            
            showFreeResult();
        }
        
        function showFreeResult() {
            const result = JSON.parse(sessionStorage.getItem('testResult'));
            
            document.getElementById('testPage').classList.add('hidden');
            document.getElementById('freeResultPage').classList.remove('hidden');
            currentPage = 'freeResult';
            
            document.getElementById('rpiScore').textContent = result.rpiIndex;
            document.getElementById('percentile').textContent = result.percentile;
            
            let level = '';
            if (result.rpiIndex <= 35) level = 'å¥åº·èŒƒå›´';
            else if (result.rpiIndex <= 65) level = 'é€‚åº¦æ°´å¹³';
            else if (result.rpiIndex <= 82) level = 'åé«˜æ°´å¹³';
            else if (result.rpiIndex <= 94) level = 'å¾ˆé«˜ï¼ˆéœ€æ³¨æ„ï¼‰';
            else level = 'æé«˜ï¼ˆçˆ±åˆ°æè‡´ï¼‰';
            
            document.getElementById('rpiLevel').textContent = level;
            document.getElementById('typeName').textContent = result.typeName;
            document.getElementById('typeDesc').textContent = result.typeDesc;
            
            drawRadarChart('radarChart', result.scores);
            
            const scoresList = document.getElementById('scoresList');
            const dimensionNames = ['æ§åˆ¶æ¬²æœ›', 'å«‰å¦’å¼ºåº¦', 'æƒ…æ„Ÿä¾èµ–', 'å…³ç³»ä¸å®‰'];
            const dimensionIcons = ['ğŸ“Š', 'ğŸ’•', 'ğŸ’—', 'ğŸ”’'];
            
            scoresList.innerHTML = '';
            result.scores.forEach((score, i) => {
                const scoreItem = document.createElement('div');
                scoreItem.className = 'score-item';
                scoreItem.innerHTML = `
                    <div class="score-item-name">${dimensionIcons[i]} ${dimensionNames[i]}</div>
                    <div class="score-item-value">${score} / 20</div>
                    <div class="score-item-desc">å æ€»å¾—åˆ† ${Math.round((score/result.totalScore)*100) || 0}%</div>
                `;
                scoresList.appendChild(scoreItem);
            });
        }
        
        function drawRadarChart(canvasId, scores) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            const isMobile = window.innerWidth <= 768;
            
            // [V3.0] é”€æ¯å¯èƒ½å­˜åœ¨çš„æ—§å›¾è¡¨ï¼Œé˜²æ­¢é‡ç»˜é”™è¯¯
            const existingChart = Chart.getChart(canvasId);
            if (existingChart) {
                existingChart.destroy();
            }
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['æ§åˆ¶æ¬²æœ›', 'å«‰å¦’å¼ºåº¦', 'æƒ…æ„Ÿä¾èµ–', 'å…³ç³»ä¸å®‰'],
                    datasets: [{
                        label: 'ä½ çš„å¾—åˆ†',
                        data: scores,
                        backgroundColor: 'rgba(255, 107, 157, 0.2)',
                        borderColor: '#ff6b9d',
                        borderWidth: 3,
                        pointBackgroundColor: '#ff6b9d',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    aspectRatio: isMobile ? 1 : 1.1,
                    layout: {
                        padding: isMobile ? {top: 15, bottom: 15, left: 5, right: 5} : {top: 30, bottom: 30, left: 30, right: 30}
                    },
                    scales: {
                        r: {
                            min: 0,
                            max: 20,
                            ticks: {
                                stepSize: 5,
                                font: {size: isMobile ? 9 : 11}
                            },
                            pointLabels: {
                                font: {size: isMobile ? 11 : 13, weight: 'bold'},
                                color: '#ff6b9d',
                                padding: isMobile ? 8 : 15
                            },
                            grid: {color: '#ffe0f0'},
                            angleLines: {color: '#ffe0f0'}
                        }
                    },
                    plugins: {
                        legend: {display: false}
                    }
                }
            });
        }
        
        /* [V3.2] çœŸå®(æ¨¡æ‹Ÿ)ä¸Šä¼ é€»è¾‘ */
        function handlePaymentProof(event) {
            const file = event.target.files[0];
            if (file) {
                // åªè¦æœ‰æ–‡ä»¶è¢«é€‰ä¸­ (æ— è®ºæ˜¯ä»€ä¹ˆæ–‡ä»¶)ï¼Œ
                // æˆ‘ä»¬å°±ç«‹å³æ˜¾ç¤ºå®Œæ•´æŠ¥å‘Šã€‚
                showFullReport();
            }
        }
        
        function showFullReport() {
            const result = JSON.parse(sessionStorage.getItem('testResult'));
            const score = result.rpiIndex; // [ä¿®å¤] è·å–åˆ†æ•°
            
            document.getElementById('freeResultPage').classList.add('hidden');
            document.getElementById('fullReportPage').classList.remove('hidden');
            
            document.getElementById('fullRpiScore').textContent = score;
            
            let level = '';
            if (score <= 35) level = 'å¥åº·èŒƒå›´';
            else if (score <= 65) level = 'é€‚åº¦æ°´å¹³';
            else if (score <= 82) level = 'åé«˜æ°´å¹³';
            else if (score <= 94) level = 'å¾ˆé«˜ï¼ˆéœ€æ³¨æ„ï¼‰';
            else level = 'æé«˜ï¼ˆçˆ±åˆ°æè‡´ï¼‰';
            
            document.getElementById('fullRpiLevel').textContent = level;
            drawRadarChart('fullRadarChart', result.scores);

            /* --- [ä¿®å¤] åŠ¨æ€é«˜äº®ä»˜è´¹é¡µé¢çš„12ç§ç±»å‹ --- */
            // 1. ç¡®å®šå½“å‰åˆ†æ•°å±äºå“ªä¸ªç±»å‹ç´¢å¼• (0-11)
            let typeIndex = 0;
            if (score <= 20) typeIndex = 0;      // ç±»å‹1
            else if (score <= 35) typeIndex = 1; // ç±»å‹2
            else if (score <= 50) typeIndex = 2; // ç±»å‹3
            else if (score <= 65) typeIndex = 3; // ç±»å‹4
            else if (score <= 75) typeIndex = 4; // ç±»å‹5
            else if (score <= 82) typeIndex = 5; // ç±»å‹6
            else if (score <= 88) typeIndex = 6; // ç±»å‹7
            else if (score <= 94) typeIndex = 7; // ç±»å‹8
            else if (score <= 97) typeIndex = 8; // ç±»å‹9
            else if (score <= 99) typeIndex = 9; // ç±»å‹10
            else if (score == 100) typeIndex = 10; // ç±»å‹11
            else typeIndex = 11; // ç±»å‹12 (ç‰¹æ®Šæƒ…å†µ)

            // 2. è·å–æ‰€æœ‰ç±»å‹ç›’å­
            const typeBoxes = document.querySelectorAll('#paidTypeList .personality-type');
            
            // 3. ç§»é™¤æ‰€æœ‰æ—§çš„é«˜äº®
            typeBoxes.forEach(box => {
                box.classList.remove('current');
                const numDiv = box.querySelector('.type-number');
                // ç§»é™¤å¯èƒ½å­˜åœ¨çš„æ˜Ÿæ˜Ÿæ–‡å­—
                if (numDiv) {
                    numDiv.textContent = numDiv.textContent.replace(' â­ ä½ åœ¨è¿™é‡Œ', ''); 
                }
            });

            // 4. ç»™å½“å‰å¯¹åº”çš„ç›’å­æ·»åŠ é«˜äº®
            if (typeBoxes[typeIndex]) {
                const targetBox = typeBoxes[typeIndex];
                targetBox.classList.add('current');
                // æ·»åŠ æ˜Ÿæ˜Ÿæ ‡è®°
                const numDiv = targetBox.querySelector('.type-number');
                if (numDiv) {
                    numDiv.textContent += ' â­ ä½ åœ¨è¿™é‡Œ';
                }
                
                // è‡ªåŠ¨æ»šåŠ¨åˆ°è¿™ä¸ªä½ç½®ï¼Œè®©ç”¨æˆ·çœ‹åˆ°
                setTimeout(() => {
                    targetBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 500);
            }
            
            window.scrollTo(0, 0);
        }
        
        function showAdminPanel() {
            document.getElementById('cardVerifyPage').classList.add('hidden');
            document.getElementById('adminPanel').classList.remove('hidden');
        }
        
        function verifyAdmin() {
            const password = document.getElementById('adminPassword').value;
            
            if (password === ADMIN_PASSWORD) {
                document.getElementById('adminContent').classList.remove('hidden');
                loadAdminStats();
            } else {
                alert('å¯†ç é”™è¯¯');
            }
        }
        
        function loadAdminStats() {
            // [V3.0] å…³é”®ä¿®å¤ï¼šä½¿ç”¨ 'loveCards'
            const cards = JSON.parse(localStorage.getItem('loveCards') || '[]');
            
            const total = cards.length;
            const used = cards.filter(c => c.deviceId).length;
            const devices = new Set(cards.filter(c => c.deviceId).map(c => c.deviceId)).size;
            
            document.getElementById('totalCards').textContent = total;
            document.getElementById('usedCards').textContent = used;
            document.getElementById('unusedCards').textContent = total - used;
            document.getElementById('deviceCount').textContent = devices;
            
            const recentRecords = document.getElementById('recentRecords');
            const recentCards = cards
                .filter(c => c.lastUsedAt)
                .sort((a, b) => new Date(b.lastUsedAt) - new Date(a.lastUsedAt))
                .slice(0, 5);
            
            if (recentCards.length === 0) {
                recentRecords.innerHTML = '<div class="record-item">æš‚æ— è®°å½•</div>';
            } else {
                recentRecords.innerHTML = '';
                recentCards.forEach(card => {
                    const date = new Date(card.lastUsedAt);
                    const dateStr = `${date.getFullYear()}-${(date.getMonth()+1).toString().padStart(2,'0')}-${date.getDate().toString().padStart(2,'0')} ${date.getHours().toString().padStart(2,'0')}:${date.getMinutes().toString().padStart(2,'0')}`;
                    
                    const recordDiv = document.createElement('div');
                    recordDiv.className = 'record-item';
                    recordDiv.textContent = `${card.code} - ä½¿ç”¨${card.testCount || 1}æ¬¡ - ${dateStr}`;
                    recentRecords.appendChild(recordDiv);
                });
            }
        }
        
        function generateCards() {
            const count = parseInt(document.getElementById('cardCount').value);
            
            if (!count || count < 1 || count > 1000) {
                alert('è¯·è¾“å…¥1-1000ä¹‹é—´çš„æ•°å­—');
                return;
            }
            
            // [V3.0] å…³é”®ä¿®å¤ï¼šä½¿ç”¨ 'loveCards'
            const cards = JSON.parse(localStorage.getItem('loveCards') || '[]');
            const newCards = [];
            
            for (let i = 0; i < count; i++) {
                newCards.push({
                    code: generateCardCode(),
                    createdAt: new Date().toISOString()
                });
            }
            
            cards.push(...newCards);
            // [V3.0] å…³é”®ä¿®å¤ï¼šä½¿ç”¨ 'loveCards'
            localStorage.setItem('loveCards', JSON.stringify(cards));
            
            const text = newCards.map(c => c.code).join('\n');
            const blob = new Blob([text], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `æ‹çˆ±æµ‹è¯„å¡å¯†_${new Date().getTime()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            alert(`æˆåŠŸç”Ÿæˆ${count}ä¸ªå¡å¯†ï¼`);
            loadAdminStats();
        }
        
        function generateCardCode() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let code = 'TF-';
            
            for (let i = 0; i < 4; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            code += '-';
            
            for (let i = 0; i < 4; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            return code;
        }
        
        function backToMain() {
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('cardVerifyPage').classList.remove('hidden');
        }
        
        window.onload = function() {
            // [V3.0] å…³é”®ä¿®å¤ï¼šä½¿ç”¨ 'loveCards'
            const cards = JSON.parse(localStorage.getItem('loveCards') || '[]');
            if (cards.length === 0) {
                const testCards = [];
                for (let i = 0; i < 10; i++) {
                    testCards.push({
                        code: generateCardCode(),
                        createdAt: new Date().toISOString()
                    });
                }
                // [V3.0] å…³é”®ä¿®å¤ï¼šä½¿ç”¨ 'loveCards'
                localStorage.setItem('loveCards', JSON.stringify(testCards));
                console.log('å·²ç”Ÿæˆ10ä¸ªæµ‹è¯•å¡å¯†ï¼Œè¯·åœ¨ç®¡ç†å‘˜åå°æŸ¥çœ‹ï¼ˆå¯†ç ï¼šlss900201ï¼‰');
            }
        };

        // --- [V3.0] JS å‡½æ•° ---
        function showWechatScan() {
            const qrElement = document.getElementById('wechatQR');
            if (qrElement) {
                qrElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                alert('å¾®ä¿¡æ”¯ä»˜è¯·ä¿å­˜äºŒç»´ç ï¼Œ\nç„¶åæ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰« â†’ ç›¸å†Œé€‰æ‹©');
            }
        }
        
        function copyToClipboard(text, buttonElement) {
            navigator.clipboard.writeText(text).then(function() {
                const originalText = buttonElement.textContent;
                buttonElement.textContent = 'å·²å¤åˆ¶!';
                buttonElement.style.background = '#07C160'; // å˜ç»¿è‰²
                setTimeout(() => {
                    buttonElement.textContent = originalText;
                    buttonElement.style.background = '#ff6b9d'; // [V3.0] å˜å›ä¸»é¢˜ç²‰è‰²
                }, 2000);
            }, function(err) {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            });
        }

        /* --- [æ–°å¢] ç”ŸæˆæŠ¥å‘Šå›¾ç‰‡åŠŸèƒ½ --- */
        function generateReportImage() {
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'æ­£åœ¨ç”Ÿæˆå›¾ç‰‡...';
            
            const reportCard = document.getElementById('fullReportPage');
            
            html2canvas(reportCard, {
                scale: 2,
                useCORS: true,
                backgroundColor: '#ffffff',
                ignoreElements: (element) => {
                    return element.tagName === 'BUTTON' || element.id === 'saveModal';
                }
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const modal = document.getElementById('saveModal');
                const img = document.getElementById('generatedReportImg');
                img.src = imgData;
                modal.style.display = 'flex';
                btn.textContent = originalText;
            }).catch(err => {
                console.error(err);
                alert('ç”Ÿæˆå¤±è´¥ï¼Œè¯·æ‰‹åŠ¨æˆªå›¾ä¿å­˜');
                btn.textContent = originalText;
            });
        }

        function closeSaveModal() {
            document.getElementById('saveModal').style.display = 'none';
        }
        // --- [V3.0] JS ç»“æŸ ---
    </script>
</body>
</html>
